let f
let g

{
  let local = "local"
  let f_() {
    print(local)
    local = "after f"
    print(local)
  }
  f = f_

  let g_() {
    print(local)
    local = "after g"
    print(local)
  }
  g = g_
}

f()
# out: local
# out: after f

g()
# out: after f
# out: after g
